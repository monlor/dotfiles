- link:
    ~/.asdfrc:
      path: config/asdf/asdfrc
      force: true
    ~/.cursor/mcp.json:
      path: config/coding/mcp.json
      force: true
- shell:
  - description: Install asdf ...
    command: |
      if ! which asdf &> /dev/null; then
      sudo GHPKG_INSTALL_DIR=/usr/local/bin ~/.local/bin/ghpkg asdf-vm/asdf
      fi
      if [ ! -d /opt/asdf ]; then
      sudo mkdir -p /opt/asdf
      sudo chmod 777 -R /opt/asdf
      echo "export ASDF_DIR=/opt/asdf" | sudo tee /opt/asdf/asdf.sh
      echo "export ASDF_DATA_DIR=\$ASDF_DIR" | sudo tee -a /opt/asdf/asdf.sh
      echo "export PATH=\$ASDF_DATA_DIR/shims:\$PATH" | sudo tee -a /opt/asdf/asdf.sh
      fi
  - description: Add golang plugin ...
    command: |
      . /opt/asdf/asdf.sh
      asdf plugin add golang https://github.com/asdf-community/asdf-golang.git
      asdf plugin add nodejs https://github.com/asdf-vm/asdf-nodejs.git
      asdf plugin add python https://github.com/danhper/asdf-python.git
      asdf plugin add bun https://github.com/cometkim/asdf-bun.git
    stdout: true
    stderr: true
  - description: Install tools ...
    command: |
      . /opt/asdf/asdf.sh
      asdf install golang 1.25.1
      asdf set -u golang 1.25.1

      asdf install python 3.13.5
      asdf set -u python 3.13.5

      asdf install nodejs 24.11.0
      asdf set -u nodejs 24.11.0

      asdf install bun 1.3.2
      asdf set -u bun 1.3.2

    stdout: true
    stderr: true
  - description: Install npm packages ...
    command: |
      . /opt/asdf/asdf.sh
      npm i -g yarn git-cz @google/gemini-cli @openai/codex @anthropic-ai/claude-code claude-code-router
    stdout: true
    stderr: true
  - description: Install python packages ...
    command: |
      . /opt/asdf/asdf.sh
      pip install ydcv uv mycli
    stdout: true
    stderr: true
  - description: Asdf reshim ...
    command: |
      . /opt/asdf/asdf.sh
      asdf reshim
    stdout: true
    stderr: true
  - description: Install claude mcp and agents ...
    command: ./config/coding/claude.sh || true
    description: Installing claude mcp and agents ...
    quiet: false
    stdout: true
    stderr: true
  - command: mkdir -p ~/.gemini && cp -n config/coding/gemini.json ~/.gemini/settings.json || true
    description: Installing gemini mcp ...
    quiet: false
    stdout: true
    stderr: true
  - command: mkdir -p ~/.codex && cp -n config/coding/codex.toml ~/.codex/config.toml || true
    description: Installing codex configuration ...
    quiet: false
    stdout: true
    stderr: true
 
